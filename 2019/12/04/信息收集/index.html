<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Velpro_Q&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Velpro_Q&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title"></h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">John Doe</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">December 4, 2019&nbsp;&nbsp;19:00:32</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="米斯特白帽培训讲义-信息收集"><a href="#米斯特白帽培训讲义-信息收集" class="headerlink" title="米斯特白帽培训讲义 信息收集"></a>米斯特白帽培训讲义 信息收集</h1><blockquote>
<p>讲师：<a href="https://www.zhihu.com/people/gh0stkey/answers" target="_blank" rel="noopener">gh0stkey</a></p>
</blockquote>
<blockquote>
<p>整理：<a href="https://github.com/" target="_blank" rel="noopener">飞龙</a></p>
</blockquote>
<blockquote>
<p>协议：<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></p>
</blockquote>
<h2 id="收集什么？"><a href="#收集什么？" class="headerlink" title="收集什么？"></a>收集什么？</h2><ul>
<li>Whois信息<ul>
<li>注册人名字、邮箱等</li>
</ul>
</li>
<li>IP信息（服务器的IP）<ul>
<li>判断是否为CDN节点，查询同IP网站，端口扫描</li>
</ul>
</li>
<li>目录信息<ul>
<li>判断WEB应用，获取网站后台目录，获取其他</li>
</ul>
</li>
<li>服务信息<ul>
<li>判断服务，例如：IIS、Apache</li>
</ul>
</li>
<li>脚本信息<ul>
<li>ASP、PHP、<code>aspx</code>（asp.net）</li>
</ul>
</li>
<li>框架信息<ul>
<li>ThinkPHP、Struts等</li>
</ul>
</li>
<li>应用信息<ul>
<li>应用，dedecms、phpcms等</li>
</ul>
</li>
<li>子域名信息<ul>
<li><code>xxx.xx.com</code> <code>xxx.xxx.xx.com</code></li>
</ul>
</li>
</ul>
<h2 id="WHOIS"><a href="#WHOIS" class="headerlink" title="WHOIS"></a>WHOIS</h2><p>查询工具：<a href="http://whois.chinaz.com" target="_blank" rel="noopener">http://whois.chinaz.com</a>。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-1c7b586d8712b0c3.jpg" alt></p>
<h2 id="IP-信息"><a href="#IP-信息" class="headerlink" title="IP 信息"></a>IP 信息</h2><p>我们可以<code>ping</code>某个 URL：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\asus&gt; ping www.hi-ourlife.com</span><br><span class="line"></span><br><span class="line">正在 Ping www.hi-ourlife.com.cname.yunjiasu-cdn.net [162.159.209.78] 具有 32 字节的数据:</span><br><span class="line">来自 162.159.209.78 的回复: 字节=32 时间=215ms TTL=52</span><br><span class="line">来自 162.159.209.78 的回复: 字节=32 时间=217ms TTL=52</span><br><span class="line">来自 162.159.209.78 的回复: 字节=32 时间=218ms TTL=52</span><br><span class="line">来自 162.159.209.78 的回复: 字节=32 时间=222ms TTL=52</span><br><span class="line"></span><br><span class="line">162.159.209.78 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 215ms，最长 = 222ms，平均 = 218ms</span><br></pre></td></tr></table></figure>

<p>但显然，这里的 IP 是 CDN 的 IP。</p>
<p>我们可以使用<a href="http://ping.chinaz.com/" target="_blank" rel="noopener">多地<code>ping</code>工具</a>来判断：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-b7fd315deb05b0d1.jpg" alt></p>
<p>一般来说，使用了 CDN 的网站在不同地点的<code>ping</code>结果是不一样的。不过这里它直接写出了百度云加速节点。</p>
<p>那么如何找出源站 IP 呢？</p>
<ol>
<li><p>查询子域：许多情况下只有主站使用了 CDN，二级站点并没有，所以我们就可以直接查询分站的 IP。分站的搜索方法见下文。</p>
</li>
<li><p>国内部分 CDN 服务只针对国内，对国外的访问几乎不使用 CDN。所以我们可以通过国外冷门 DNS 查询域名。比如，<code>nslookup xxx.com 199.89.126.10</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\asus\Desktop&gt; nslookup hi-ourlife.com 199.89.126.10</span><br><span class="line">服务器:  UnKnown</span><br><span class="line">Address:  199.89.126.10</span><br><span class="line"></span><br><span class="line">非权威应答：</span><br><span class="line">名称：   hi-ourlife.com</span><br><span class="line">Address:  45.64.65.85</span><br></pre></td></tr></table></figure>
</li>
<li><p>历史解析记录：CDN 的 IP 地址之前所用的 IP 就是真实 IP。</p>
<p><a href="http://toolbar.netcraft.com/site_report?url=" target="_blank" rel="noopener">http://toolbar.netcraft.com/site_report?url=</a></p>
</li>
<li><p>查询邮件：很多服务器自带邮件发送功能，可以利用它来获取真实 IP。让站点主动发送邮件，然后右键查询源代码，就能获得真实 IP。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-b996296eb07396c1.jpg" alt></p>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-c3aab1ecd7b22f58.jpg" alt></p>
</li>
</ol>
<p>这个工具可以检测旁站：<a href="http://tool.chinaz.com/same/" target="_blank" rel="noopener">http://tool.chinaz.com/same/</a>。</p>
<p>端口扫描可以使用 Nmap 进行，请见“工具篇 Nmap”一节。</p>
<h2 id="目录信息"><a href="#目录信息" class="headerlink" title="目录信息"></a>目录信息</h2><ol>
<li><p>主动式扫描：爬虫、暴力破解</p>
<ul>
<li>AVWS：根据站点的链接（见“工具篇 AVWS”一节）</li>
<li><a href="http://www.jb51.net/softs/43405.html" target="_blank" rel="noopener">御剑</a>：根据固定的字典</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-47f1a9b882580ca9.jpg" alt></p>
</li>
<li><p>被动式扫描：Burp Spider</p>
</li>
<li><p>Google Hack</p>
<ul>
<li><code>intitle</code>：搜索网页标题中包含有特定字符的网页</li>
<li><code>inurl</code>：搜索包含有特定字符的 URL</li>
<li><code>intext</code>：搜索网页正文内容中的指定字符</li>
<li><code>filetype</code>：搜索指定类型的文件</li>
<li><code>site</code>：搜索与指定网站有联系的 URL</li>
</ul>
</li>
<li><p><code>robots.txt</code>（补充）</p>
<p>重点看<code>Disallow</code>的部分。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-fc60c300fddf9f27.jpg" alt></p>
</li>
<li><p>联网设备搜索</p>
<ul>
<li>钟馗之眼<code>www.zoomeye.com</code>。</li>
<li>傻蛋<code>www.oshadan.com</code>。</li>
</ul>
<p>联网设备搜索引擎可以检索到许多搜索引擎不收录的页面，通常是后台等页面。</p>
<p>构造检索关键词时：</p>
<ul>
<li>系统/后台类，可以搜索“xxx系统/平台/管理”。</li>
<li>企业类，可以搜索“xxx企业/公司/平台”。</li>
</ul>
<p>比如我们要挖电信的系统，可以搜索“电信系统/平台/管理”。</p>
<p>这里使用傻蛋这个平台演示一下，它不仅仅能监控系统，还能搜索到一些内网的系统。比如我们要挖一些电信系统，这里点击全网搜索，可以看到很多外网看不到的内部系统。</p>
<p><img src="http://ww3.sinaimg.cn/large/841aea59jw1fasglfymq5j217w0jlta8.jpg" alt></p>
<p><img src="http://ww3.sinaimg.cn/large/841aea59jw1fasglm7pp2j217y0ke766.jpg" alt></p>
<p>我们点击其中一个“汕尾用电监控系统”，可以看到详细的用电情况，这个就属于一种越权或者绕过。</p>
<p><img src="http://ww1.sinaimg.cn/large/841aea59jw1fasgo1c3s0j21d80gzwgb.jpg" alt></p>
</li>
</ol>
<h2 id="服务信息"><a href="#服务信息" class="headerlink" title="服务信息"></a>服务信息</h2><p>查看返回的数据包的<code>Server</code>头，获取<code>Server</code>信息。如<code>Server:Microsoft-IIS/6.0</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/1.1</span><br><span class="line">Host: www.hi-ourlife.com</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Cookie: __cfduid=d85643dc07ab45d17ec48c37dde7145d11480308480; PHPSESSID=qfg2unrqvc1adhvcpn8ejhguqulakcd2; CNZZDATA1258769653=1514150716-1480308628-%7C1480308628; timezone=8</span><br><span class="line">X-Forwarded-For: 127.0.0.1</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line"></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date: Mon, 28 Nov 2016 05:43:11 GMT</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Product: Z-BlogPHP 1.5 Zero</span><br><span class="line">Expires: Thu, 19 Nov 1981 08:52:00 GMT</span><br><span class="line">Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">Server: yunjiasu-nginx</span><br><span class="line">CF-RAY: 308b8035114c226a-LAX</span><br><span class="line">Content-Encoding: gzip</span><br></pre></td></tr></table></figure>

<p>这个封包告诉我们服务器是 Nginx。</p>
<h2 id="脚本信息"><a href="#脚本信息" class="headerlink" title="脚本信息"></a>脚本信息</h2><ol>
<li><p>查看返回的数据包中的<code>X-Powered-By</code>的值</p>
</li>
<li><p>查看cookie中的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PHPSESSID</span><br><span class="line">ASPSESSID</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>比如上面的封包中出现了<code>PHPSESSID</code>，说明站点很可能使用 PHP 编写。</p>
<h2 id="框架信息"><a href="#框架信息" class="headerlink" title="框架信息"></a>框架信息</h2><p>通过报错信息或是URL结构获取网站使用的框架信息。如ThinkPHP，Struts等。</p>
<h2 id="应用信息"><a href="#应用信息" class="headerlink" title="应用信息"></a>应用信息</h2><p>目录特征、文件特征、指纹扫描工具、网站特征等。</p>
<p>比如存在<code>wp-login.php</code>就可能是 WordPress。</p>
<h2 id="子域名信息"><a href="#子域名信息" class="headerlink" title="子域名信息"></a>子域名信息</h2><ul>
<li><p><a href="http://www.cnseay.com/3590/comment-page-1/" target="_blank" rel="noopener">子域名挖掘机</a></p>
<p><img src="http://www.cnseay.com/wp-content/uploads/2013/12/20131222225752_14855.jpg" alt></p>
</li>
<li><p>搜素引擎：<code>site:*.xxx.com</code></p>
</li>
</ul>
<h2 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h2><p><a href="http://baike.baidu.com/item/%E7%A4%BE%E4%BC%9A%E5%B7%A5%E7%A8%8B%E5%AD%A6" target="_blank" rel="noopener">社会工程学</a>：使人们顺从你的意愿、满足你的欲望的一门艺术与学问。</p>
<p>QQ 空间人肉方法的思维导图：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-e8476231a7994b74.png" alt></p>
<p><img src="http://upload-images.jianshu.io/upload_images/118142-dc6d04e58a39a844.png?" alt></p>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><ul>
<li><p><a href="https://zhuanlan.zhihu.com/p/23635061" target="_blank" rel="noopener">信息安全泄露只在一念之间(一)企鹅扣扣</a></p>
</li>
<li><p><a href="https://pan.baidu.com/share/link?shareid=2318908755&uk=1947372036&fid=74383462672650" target="_blank" rel="noopener">社工研究组文集</a></p>
</li>
<li><p><a href="http://www.jianshu.com/p/366e00c32d2b" target="_blank" rel="noopener">Kali Linux 秘籍 第四章 信息收集</a></p>
</li>
<li><p><a href="http://www.jianshu.com/p/ad77b3af8651" target="_blank" rel="noopener">Kali Linux Web 渗透测试秘籍 第二章 侦查</a></p>
</li>
</ul>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>John Doe</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://yoursite.com/2019/12/04/信息收集/">http://yoursite.com/2019/12/04/信息收集/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY<strong>?</strong></strong></span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2019/12/04/实战篇 WordPress/"></a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© John Doe | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
